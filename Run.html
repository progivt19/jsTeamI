<html>
<title>
	TD v0.03
</title>

	<h1><p align = "center">Tower Defense</p></h1>
	
	<div >
		<img id="Title" src="Title-x.jpg" onmousedown="Start(event)">
	</div>

	<div style="position:relative; z-index:3;">
	<img id="MainMenu" src="Main-0.jpg" style="display: none;"> 
	</div>
	<div style="position:relative; top:-172; left:983; z-index:4" >
	<img id="Testmode" src="MMButton-TM.jpg" style="display: none;" onmousedown="TMStart(event)">
	</div>
	<div style="position:relative; z-index:5;">
	<img id="Maptest" src="TestMap.jpg" style="display: none;">
	</div>
	<div style="position:relative; z-index:6; top:-100">
		<img id="SpawnTower" src="SpawnTower.jpg" style="display: none;" onmousedown="Bunker(event)">
		<img id="SpawnEnemy" src="SpawnEnemy.jpg" style="display: none;" onmousedown="EnemyAtt(event)">
	</div>
	<div id='Div22' style="position:relative; z-index:6;top:-625;left:600;">
		<img id="Tower" src="Bunker-1.jpg" style="display: none;">
	</div>
	<div id="EnemyID" style="position:relative; z-index:6;">
		<img id="Enemy" src="Enemy.jpg" style="display: none;">
	</div>
	<div id="ShotID" style="position:relative; z-index:6;">
		<img id="Shot" src="Bullet.jpg" style="display: none;">
	</div>

	<script>
	function Start(event){ //Переход со стартового экрана в главное меню
  		x = -1;
  		TitleX;
  		Title.style = "display:none";
  		MainID;
  		MainMenu.style = "display:yes";
  		MMBTM;
  		Testmode.style = "display:yes";
		}

	function TMStart(event){ //Переход с главного меню в тестовый уровень
		MainID;
  		MainMenu.style = "display:none";
  		MMBTM;
  		Testmode.style = "display:none";
  		TSID;
  		Maptest.style = "display:yes";
  		SpawnButton1;
  		SpawnTower.style="display:yes";
  		SpawnButton2;
  		SpawnEnemy.style="display:yes";
  		setInterval(attack,1000);
  		setInterval(radius,1000);
  		coordinate();
	}

	function Bunker(event){ //Создание башни - бункера
		document.getElementById('Tower');
		Tower.style="display:yes";
		Tcount = Tcount + 1;
		BulletSet();
		radiusset();
	}

	function EnemyAtt(event){ //Создание врага
		document.getElementById('Enemy');
		Enemy.style="display:yes";
		setInterval(enemymovement, 1000);
	}

	function check1(){ //Просто проверка
	if(Tcount > 0){
		console.log(Enemy.style.display);
		console.log(Div22.style);
		}
	}

	function attack(){ //Если враг войдет в радиус атаки, то он будет атакован
		if(alert == true){
			document.getElementById('ShotID');
			Shot.style="display:yes";

		}
	}

	var radiusW;var radiusS;var radiusN;var radiusE;

	function radiusset(){ //Установка радиуса башни
		radiusW = Towercoorli - 150;
		radiusE = Towercoorli + 150;
		radiusN = Towercoorti - 150;
		radiusS = Towercoorti + 150;
	}

	function radius(){  //Проверяет на наличие врагов внутри радиуса
		if((Enemycoorli < radiusE) && (Enemycoorli > radiusW) && (Enemycoorti < radiusS) && (Enemycoorti > radiusN)){
			alert = true;
		}else{ alert = false}
	}

	function BulletSet(){ //Установка начальных координат пули
		if(Tcount > 0){
			ShotID.style.left = Div22.style.left;
			ShotID.style.top = Div22.style.top;
		}
	}

	function enemymovement(){ //Передвижение врага
		//if(Enemy.style.display === "")
		Enemycoorli = Enemycoorli - 30;
		Enemycoorl = Enemycoorli.toString();
		Enemycoorl = Enemycoorl + "px";
		EnemyID.style.left = Enemycoorl;
		EnemyID.style.top = Enemycoort;
		Enemy.style.display = "yes";
		
	}

	var Towercoorl = Div22.style.left;	var Towercoorli = "";
	var Towercoort = Div22.style.top;	var Towercoorti = "";
	var Enemycoorl = "1250px";	var Enemycoorli = "";
	var Enemycoort = "-620px";	var Enemycoorti = "";

	function coordinate(){ //Перевод координат картинок в числовое значение
		for(var i = 0; i < Towercoorl.length; i++){
			if((Towercoorl.charAt(i) * 0) == 0){
				Towercoorli = Towercoorli + Towercoorl.charAt(i);
			} 
		}
		Towercoorli = Towercoorli * 1;
		for(var ii = 0; ii < Towercoort.length; ii++){
			if((Towercoort.charAt(ii) * 0) == 0){
				Towercoorti = Towercoorti + Towercoort.charAt(ii);
			} 
		}
		Towercoorti = Towercoorti * 1;
		for(var iii = 0; iii < Enemycoorl.length; iii++){
			if((Enemycoorl.charAt(iii) * 0) == 0){
				Enemycoorli = Enemycoorli + Enemycoorl.charAt(iii);
			} 
		}
		Enemycoorli = Enemycoorli * 1;
		for(var iiii = 0; iiii < Enemycoort.length; iiii++){
			if((Enemycoort.charAt(iiii) * 0) == 0){
				Enemycoorti = Enemycoorti + Enemycoort.charAt(iiii);
			} 
		}
		Enemycoorti = Enemycoorti * 1;
	}

var alert = false;

var MainID = document.getElementById('MainMenu');
var MMBTM = document.getElementById('TestMode');
var TSID = document.getElementById('Maptest');
var SpawnButton1 = document.getElementById('SpawnTower');
var SpawnButton2 = document.getElementById('SpawnEnemy');

var x = 0;
var Tcount = 0;
var Ecount = 0;
var TitleX = document.getElementById('Title'); //Стартовый экран
document.write(TitleT());

	function TitleT(){
	Title.src = 'Title-' + x + '.jpg';
	var TitleIdle = setInterval(TitleP, 1000);
}

function TitleP(){
		if(x < 0){
			clearInterval();
		}
		TitleX;
		x++;
		Title.src = 'Title-' + x + '.jpg';
		if(x > 1){
			x = 0;
			Title.src = 'Title-' + x + '.jpg';
		}
}
</script>

<div>
	<script src="Core.js">
	</script>
</div>

